<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RegExp</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/nodejs-notes/assets/css/0.styles.e62306a8.css" as="style"><link rel="preload" href="/nodejs-notes/assets/js/app.21c8c690.js" as="script"><link rel="preload" href="/nodejs-notes/assets/js/3.3c66409c.js" as="script"><link rel="preload" href="/nodejs-notes/assets/js/17.fa715d45.js" as="script"><link rel="prefetch" href="/nodejs-notes/assets/js/1.7384dd9d.js"><link rel="prefetch" href="/nodejs-notes/assets/js/10.5f4d0c8f.js"><link rel="prefetch" href="/nodejs-notes/assets/js/11.521db22d.js"><link rel="prefetch" href="/nodejs-notes/assets/js/12.afa08de9.js"><link rel="prefetch" href="/nodejs-notes/assets/js/13.80238336.js"><link rel="prefetch" href="/nodejs-notes/assets/js/14.ffb663c6.js"><link rel="prefetch" href="/nodejs-notes/assets/js/15.2be05732.js"><link rel="prefetch" href="/nodejs-notes/assets/js/16.2a709045.js"><link rel="prefetch" href="/nodejs-notes/assets/js/18.d9ddc906.js"><link rel="prefetch" href="/nodejs-notes/assets/js/19.497f6348.js"><link rel="prefetch" href="/nodejs-notes/assets/js/20.42e9dc36.js"><link rel="prefetch" href="/nodejs-notes/assets/js/21.ee788258.js"><link rel="prefetch" href="/nodejs-notes/assets/js/4.eb89986a.js"><link rel="prefetch" href="/nodejs-notes/assets/js/5.c15b3792.js"><link rel="prefetch" href="/nodejs-notes/assets/js/6.de1e01ed.js"><link rel="prefetch" href="/nodejs-notes/assets/js/7.fd3efa5e.js"><link rel="prefetch" href="/nodejs-notes/assets/js/8.b3e41791.js"><link rel="prefetch" href="/nodejs-notes/assets/js/9.60345875.js">
    <link rel="stylesheet" href="/nodejs-notes/assets/css/0.styles.e62306a8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nodejs-notes/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/nodejs-notes/core/" class="nav-link router-link-active">
  JS Core
</a></div><div class="nav-item"><a href="/nodejs-notes/api/" class="nav-link">
  Node.js API
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/nodejs-notes/core/" class="nav-link router-link-active">
  JS Core
</a></div><div class="nav-item"><a href="/nodejs-notes/api/" class="nav-link">
  Node.js API
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据类型</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>原始类型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>引用类型</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nodejs-notes/core/date.html" class="sidebar-link">Date</a></li><li><a href="/nodejs-notes/core/regexp.html" aria-current="page" class="active sidebar-link">RegExp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nodejs-notes/core/regexp.html#模式-pattern" class="sidebar-link">模式 pattern</a></li><li class="sidebar-sub-header"><a href="/nodejs-notes/core/regexp.html#标记-flags" class="sidebar-link">标记 flags</a></li><li class="sidebar-sub-header"><a href="/nodejs-notes/core/regexp.html#实例属性" class="sidebar-link">实例属性</a></li><li class="sidebar-sub-header"><a href="/nodejs-notes/core/regexp.html#实例方法" class="sidebar-link">实例方法</a></li><li class="sidebar-sub-header"><a href="/nodejs-notes/core/regexp.html#构造函数属性" class="sidebar-link">构造函数属性</a></li></ul></li><li><a href="/nodejs-notes/core/array.html" class="sidebar-link">Array</a></li><li><a href="/nodejs-notes/core/set.html" class="sidebar-link">Set 集合</a></li></ul></section></li></ul></section></li><li><a href="/nodejs-notes/core/proxy.html" class="sidebar-link">Proxy 代理</a></li><li><a href="/nodejs-notes/core/iterator.html" class="sidebar-link">迭代器</a></li><li><a href="/nodejs-notes/core/promise.html" class="sidebar-link">Promise</a></li><li><a href="/nodejs-notes/core/tagfunction.html" class="sidebar-link">Tag function</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="regexp"><a href="#regexp" class="header-anchor">#</a> RegExp</h1> <p>js 中正则实例有字面量写法 <code>/pattern/flags</code> 和构造函数 <code>new RegExp(pattern, flags)</code> 写法，区别是字面量需要对特殊字符进行转义。</p> <h2 id="模式-pattern"><a href="#模式-pattern" class="header-anchor">#</a> 模式 pattern</h2> <p>正则表达式。其中可以使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions/Character_Classes" target="_blank" rel="noopener noreferrer">字符类<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>代表一类字符。</p> <p>使用构造函数时要注意对一些元字符进行转义。与字面量写法相比，构造函数中的第一个参数模式可读性比较差。</p> <h2 id="标记-flags"><a href="#标记-flags" class="header-anchor">#</a> 标记 flags</h2> <p>标记用于控制正则表达式的行为</p> <table><thead><tr><th>标记</th> <th>实例属性</th> <th>行为</th></tr></thead> <tbody><tr><td>g</td> <td>global</td> <td>全局匹配</td></tr> <tr><td>i</td> <td>ignoreCase</td> <td>忽略大小写</td></tr> <tr><td>s</td> <td>dotAll</td> <td>.匹配所有字符</td></tr> <tr><td>u</td> <td>unicode</td> <td>启用 Unicode 匹配</td></tr> <tr><td>m</td> <td>multiline</td> <td>多行匹配</td></tr> <tr><td>y</td> <td>sticky</td> <td>粘性匹配</td></tr></tbody></table> <ul><li><p>global 全局匹配</p> <p>设置后匹配全部，不设置匹配到第一个就退出</p></li></ul> <div class="code-block inside-gutter">const reg = /a/;
const regG = /a/g;
console.log(&quot;aaa&quot;.match(reg), &quot;aaa&quot;.match(regG));
</div><ul><li><p>multiline 多行匹配</p> <p><code>^</code> 和 <code>$</code> 元字符可以在每一行进行匹配</p></li></ul> <div class="code-block inside-gutter">`a
a
a
a`.match(/^a$/gm);
</div><ul><li><p>dotAll 模式</p> <p>设置后 <code>.</code>可以匹配换行符</p></li> <li><p>sticky 粘附模式</p> <p>只从 lastIndex 开始匹配，与 global 全局模式相冲突，同时出现 sticky 时行为将覆盖 global 行为。</p></li></ul> <div class="code-block inside-gutter">let m1 = &quot;abcabc&quot;.match(/ab/g);
let m2 = &quot;abcabc&quot;.match(/ab/gy);
let m3 = &quot;abcabc&quot;.match(/abc/gy);
console.log(m1, m2, m3);
</div><ul><li><p>unicode 匹配</p> <ul><li><p>可使用 Unicode 属性，每个属性都有全名还多个简写。属性比字符类支持更多语言的字符。</p> <ul><li>non-binary 属性 <code>\p{UnicodePropertyName=UnicodePropertyValue}</code></li> <li>binary 属性 <code>\p{LoneUnicodePropertyNameOrValue}</code></li></ul></li> <li><p>参考</p> <ul><li><a href="https://tc39.es/ecma262/#sec-runtime-semantics-unicodematchproperty-p" target="_blank" rel="noopener noreferrer">https://tc39.es/ecma262/#sec-runtime-semantics-unicodematchproperty-p<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/tc39/proposal-regexp-unicode-property-escapes" target="_blank" rel="noopener noreferrer">https://github.com/tc39/proposal-regexp-unicode-property-escapes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://unicode.org/reports/tr18/" target="_blank" rel="noopener noreferrer">https://unicode.org/reports/tr18/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stackoverflow.com/questions/280712/javascript-unicode-regexes" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/280712/javascript-unicode-regexes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions/Unicode_Property_Escapes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></li></ul> <div class="code-block inside-gutter">console.log(&quot;⑥&quot;.match(/\p{N}/u));
</div><h2 id="实例属性"><a href="#实例属性" class="header-anchor">#</a> 实例属性</h2> <p>除了<a href="#%E6%A0%87%E8%AE%B0-flags">标记</a>对应的几个实例属性外，还有：</p> <ul><li>source 正则字面量字符串，就是两斜杠中间的那部分</li> <li>flags 正则标记字符串</li> <li>lastIndex 下一次搜索的开始位置</li></ul> <div class="code-block inside-gutter">const exp = /^abc/gi;
console.log({ source: exp.source, flags: exp.flags });
</div><h2 id="实例方法"><a href="#实例方法" class="header-anchor">#</a> 实例方法</h2> <ul><li><p>exec</p> <p>返回一个数组，数组内容为匹配到的内容、从外到内、从左到右的匹配组内容。</p></li></ul> <div class="code-block inside-gutter">/(a(b(c)))/.exec(&quot;abcd&quot;);
</div><p>数组中还包含三个属性:</p> <p><code>index</code>匹配内容的下标</p> <p><code>input</code>被匹配的完整字符串</p> <p><code>groups</code> 具名捕获组 <code>(?&lt;name&gt;)</code></p> <p>当标识为 <code>y</code> 或 <code>g</code> 时，<code>lastIndex</code> 会在匹配后向后移动</p> <div class="code-block inside-gutter">const reg = /(a(?&lt;center&gt;b(c)))/g;
const result = reg.exec(&quot;abcd&quot;);
console.log(result.groups, result.index);
console.log(reg.lastIndex);
</div><ul><li>test 返回 Boolean 值，标识为 <code>y</code> 或 <code>g</code> 时，<code>lastIndex</code> 会在匹配后向后移动，匹配到就返回 true.</li></ul> <div class="code-block inside-gutter">let reg = /a/g;
let s = &quot;aa&quot;;
console.log(reg.test(s), reg.lastIndex);
console.log(reg.test(s), reg.lastIndex);
console.log(reg.test(s), reg.lastIndex);
console.log(reg.test(s), reg.lastIndex);
</div><h2 id="构造函数属性"><a href="#构造函数属性" class="header-anchor">#</a> 构造函数属性</h2> <p><code>RegExp</code>上的属性标识作用域内上次正则的执行情况，有全名和简写两种方式来访问同一属性。</p> <table><thead><tr><th>全名</th> <th>简写</th> <th>note</th></tr></thead> <tbody><tr><td>input</td> <td>$_</td> <td>最后搜索字符串（非标准）</td></tr> <tr><td>lastMatch</td> <td>$&amp;</td> <td>最后匹配的文本</td></tr> <tr><td>lastParen</td> <td>$+</td> <td>最后匹配的捕获组（非标准）</td></tr> <tr><td>leftContext</td> <td>$`</td> <td>input 字符串中出现在 lastMatch 前面的文本</td></tr> <tr><td>rightContext</td> <td>$'</td> <td>input 字符串中出现在 lastMatch 后面的文本</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/nodejs-notes/core/date.html" class="prev">
        Date
      </a></span> <span class="next"><a href="/nodejs-notes/core/array.html">
        Array
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/nodejs-notes/assets/js/app.21c8c690.js" defer></script><script src="/nodejs-notes/assets/js/3.3c66409c.js" defer></script><script src="/nodejs-notes/assets/js/17.fa715d45.js" defer></script>
  </body>
</html>
